<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>embedded-software: Accelerometer module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">embedded-software
   </div>
   <div id="projectbrief">reusable software modules for embedded systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__accelerometer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Accelerometer module</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabb5dc31f52b4c94babb890afe85fdc29"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__accelerometer.html#gabb5dc31f52b4c94babb890afe85fdc29">Accelerometer_Init</a> (uint16_t period, void(*callback)(float x, float y, float z))</td></tr>
<tr class="memdesc:gabb5dc31f52b4c94babb890afe85fdc29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the accelerometer to read data at a period returning to a callback.  <a href="#gabb5dc31f52b4c94babb890afe85fdc29">More...</a><br/></td></tr>
<tr class="separator:gabb5dc31f52b4c94babb890afe85fdc29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae22be8908e6faff9d8ea3e54adfb31f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__accelerometer.html#gae22be8908e6faff9d8ea3e54adfb31f0">Accelerometer_Deinit</a> (void)</td></tr>
<tr class="memdesc:gae22be8908e6faff9d8ea3e54adfb31f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitialize the accelerometer task scheduler.  <a href="#gae22be8908e6faff9d8ea3e54adfb31f0">More...</a><br/></td></tr>
<tr class="separator:gae22be8908e6faff9d8ea3e54adfb31f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Created on: March 25, 2019 Updated on: April 12, 2019 Author: Stephen Glass, Lonnie Souder</p>
<p>@ brief Code to read data from an accelerometer. Designed for SparkFun Triple Axis Accelerometer Breakout (MMA8452Q) </p>
<dl class="section author"><dt>Author</dt><dd>Stephen Glass </dd>
<dd>
Lonnie Souder </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0</dd></dl>
<p>following macros should be defined project_settings #define I2C_MAX_TX_SIZE 2 #define I2C_MAX_RX_SIZE 6 </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae22be8908e6faff9d8ea3e54adfb31f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Accelerometer_Deinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitialize the accelerometer task scheduler. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__accelerometer_gae22be8908e6faff9d8ea3e54adfb31f0_cgraph.png" border="0" usemap="#group__accelerometer_gae22be8908e6faff9d8ea3e54adfb31f0_cgraph" alt=""/></div>
<map name="group__accelerometer_gae22be8908e6faff9d8ea3e54adfb31f0_cgraph" id="group__accelerometer_gae22be8908e6faff9d8ea3e54adfb31f0_cgraph">
<area shape="rect" id="node2" href="group__task.html#gacd7cea229f4ff2d572cfd743f0334f95" title="Removes Task. " alt="" coords="200,5,307,32"/><area shape="rect" id="node3" href="group__list.html#ga80fa129ff1dfe7cc85d164d5a6fccf42" title="List_Remove" alt="" coords="355,5,453,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabb5dc31f52b4c94babb890afe85fdc29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t Accelerometer_Init </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(float x, float y, float z)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the accelerometer to read data at a period returning to a callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">period</td><td>period to check data from accelerometer (milliseconds) </td></tr>
    <tr><td class="paramname">period</td><td>function pointer for callback where data is returned </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns success of initialization, (&lt; 0 is error) </dd></dl>
<p>Initialize I2C communication with accelerometer</p>
<p>Configure base transaction configuration</p>
<p>Start read of WHO_AM_I register to check if device is online We write the register we want to read in first transaction, while keeping connection active The next transaction we read the value from the previous register and terminate the connection</p>
<p>Reading WHO_AM_I always returns DEVICE_FOUND</p>
<p>Put into STANDBY mode Registers can only be changed on accelerometer while in STANDBY mode Read the CTRL_REG1 value and then write the negated value to CTRL_REG1</p>
<p>Configure scale</p>
<p>Put into ACTIVE mode Read the CTRL_REG1 value and then write the enabled value to CTRL_REG1</p>
<p>Assign callback pointer to data structure</p>
<p>Schedule task to read data </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__accelerometer_gabb5dc31f52b4c94babb890afe85fdc29_cgraph.png" border="0" usemap="#group__accelerometer_gabb5dc31f52b4c94babb890afe85fdc29_cgraph" alt=""/></div>
<map name="group__accelerometer_gabb5dc31f52b4c94babb890afe85fdc29_cgraph" id="group__accelerometer_gabb5dc31f52b4c94babb890afe85fdc29_cgraph">
<area shape="rect" id="node2" href="i2c_8h.html#a91e920a8b4ea820781519688c4539bb4" title="I2C_Init" alt="" coords="201,86,269,113"/><area shape="rect" id="node5" href="i2c_8h.html#abf53f7cb2b18ef3b3702bd8828c3c5f5" title="I2C_Transact" alt="" coords="184,188,285,214"/><area shape="rect" id="node17" href="group__task.html#ga7fc124db459cf9e6f4b0ffb4083eff7e" title="Adds task to be scheduled for execution. " alt="" coords="340,340,452,366"/><area shape="rect" id="node3" href="_m_s_p430_2_m_s_p430_f5529_2hal__i2c_8c.html#ab3ed2134b647ccb3ca01d69fe398381e" title="hal_I2C_Init" alt="" coords="350,36,442,62"/><area shape="rect" id="node4" href="group__list.html#gacc707ed1f1ffdb563d26a5197786fbcb" title="List_Init" alt="" coords="362,86,430,113"/><area shape="rect" id="node6" href="group__list.html#gace91195eb28d548f091202d8a8fff06b" title="List_AddAndLink" alt="" coords="336,137,456,164"/><area shape="rect" id="node7" href="group__task.html#gafd2aa563748d1ede229e5867753ead5d" title="SystemTick" alt="" coords="350,188,442,214"/><area shape="rect" id="node16" href="group__list.html#gafae6d0ac526e5f6e3234953e57230cb7" title="List_RemoveFirst" alt="" coords="333,238,459,265"/><area shape="rect" id="node8" href="group__list.html#ga645d81a49b82c4009487089fd4f98338" title="List_Link" alt="" coords="528,137,603,164"/><area shape="rect" id="node9" href="group__hal__general.html#ga5a740c360e0109e7336adef05ef253a5" title="Backup the interrupt status (i.e. IPL) and block interrupts. " alt="" coords="678,86,789,113"/><area shape="rect" id="node10" href="group__hal__general.html#ga54ccac0b414f39b6d7d031e4be945a99" title="RestoreInterrupts after blocking interrupts (BlockInterrupts()) " alt="" coords="672,213,795,240"/><area shape="rect" id="node11" href="group__list.html#ga8d33461dcffd998d929eff432f32949d" title="List_GetFirst" alt="" coords="517,86,614,113"/><area shape="rect" id="node12" href="group__timing.html#gad33d57773db985176e2722aeebfee9cc" title="Returns the current system time in milliseconds. " alt="" coords="526,340,605,366"/><area shape="rect" id="node13" href="group__list.html#ga71bd31a42180cf44b8ee3186c77765a8" title="List_UnlinkFirst" alt="" coords="509,188,622,214"/><area shape="rect" id="node14" href="group__list.html#gab6f45e11004da187e5637ab46831d39b" title="List_LinkItem" alt="" coords="515,36,615,62"/><area shape="rect" id="node15" href="group__list.html#ga80fa129ff1dfe7cc85d164d5a6fccf42" title="List_Remove" alt="" coords="516,238,615,265"/><area shape="rect" id="node18" href="group__list.html#ga1a8339a388bfff7c959d5487ac829cd1" title="List_AddIndirect is used to obtain a valid position for which an item can be saved to..." alt="" coords="507,390,623,417"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 8 2019 01:29:43 for embedded-software by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
